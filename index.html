<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Meu Gestor Financeiro Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        darkbg: {
                            DEFAULT: '#0a0a0a',
                            card: '#111111', 
                            lighter: '#1a1a1a',
                            border: '#2a2a2a',
                            table_hover: '#151515',
                            accent: '#8b5cf6',
                            accent_dark: '#7c3aed',
                        },
                        text: {
                            DEFAULT: '#e5e5e5',
                            heading: '#ffffff',
                            secondary: '#a3a3a3',
                            placeholder: '#737373',
                        },
                        primary: {
                            100: '#ddd6fe',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                        },
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        purple: {
                            50: '#faf5ff',
                            100: '#f3e8ff',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            800: '#5b21b6',
                        },
                        crypto: {
                            DEFAULT: '#f97316',
                            dark: '#ea580c'
                        },
                        energy: {
                            DEFAULT: '#dc2626',
                            dark: '#b91c1c'
                        },
                        utilities: {
                            DEFAULT: '#059669',
                            dark: '#047857'
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'scale-in': 'scaleIn 0.3s ease-out forwards',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-subtle': 'bounceSubtle 2s infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        scaleIn: {
                            '0%': { opacity: '0', transform: 'scale(0.9)' },
                            '100%': { opacity: '1', transform: 'scale(1)' }
                        },
                        bounceSubtle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px rgba(139, 92, 246, 0.5)' },
                            '100%': { boxShadow: '0 0 20px rgba(139, 92, 246, 0.8)' }
                        }
                    },
                    backdropBlur: {
                        xs: '2px',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Glassmorphism e efeitos modernos */
        .glass {
            background: rgba(17, 17, 17, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-light {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* Gradientes modernos */
        .gradient-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .gradient-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .gradient-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        /* Hover effects avan√ßados */
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        
        .hover-glow:hover {
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4);
        }
        
        /* Chart container melhorado */
        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .progress-ring__circle {
            transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.3));
        }
        
        /* Anima√ß√µes personalizadas */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .float {
            animation: float 6s ease-in-out infinite;
        }
        
        /* Scrollbar customizada */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #8b5cf6;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #7c3aed;
        }
        
        /* Notifica√ß√µes melhoradas */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateX(100px);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9) 0%, rgba(5, 150, 105, 0.9) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .notification.warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.9) 0%, rgba(217, 119, 6, 0.9) 100%);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .notification.error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9) 0%, rgba(220, 38, 38, 0.9) 100%);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        /* Inputs melhorados */
        .input-modern {
            background: rgba(26, 26, 26, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px 16px;
            color: #e5e5e5;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .input-modern:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            outline: none;
        }
        
        /* Bot√µes melhorados */
        .btn-modern {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .btn-modern::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-modern:hover::before {
            left: 100%;
        }
        
        /* Tabela melhorada */
        .table-modern {
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .table-modern th,
        .table-modern td {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px;
        }
        
        .table-modern tbody tr {
            transition: all 0.3s ease;
        }
        
        .table-modern tbody tr:hover {
            background: rgba(139, 92, 246, 0.1);
            transform: scale(1.01);
        }
        
        /* Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Efeitos de part√≠culas */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #8b5cf6;
            border-radius: 50%;
            animation: particle-float 8s infinite linear;
        }
        
        @keyframes particle-float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>

<body class="bg-darkbg text-text min-h-screen font-sans overflow-x-hidden">
    <!-- Part√≠culas de fundo -->
    <div class="particles" id="particles"></div>
    
    <div class="container mx-auto px-4 py-8 relative z-10">
        <!-- Header melhorado -->
        <header class="flex flex-col lg:flex-row justify-between items-center mb-12 gap-6 animate-fade-in">
            <div class="flex items-center gap-6">
                <div class="gradient-primary p-4 rounded-2xl shadow-2xl hover-glow float">
                    <i class="fas fa-wallet text-3xl text-white"></i>
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-text-heading bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                        Meu Gestor Financeiro Pro
                    </h1>
                    <p class="text-text-secondary text-lg mt-1">Controle seus investimentos de forma inteligente e moderna</p>
                </div>
            </div>
            
            <div class="glass p-6 rounded-2xl shadow-2xl hover-lift w-full lg:w-auto">
                <div class="flex items-center gap-4">
                    <div class="text-right">
                        <p class="text-sm text-text-secondary font-medium">Saldo dispon√≠vel</p>
                        <p class="text-2xl font-bold text-text-heading">R$ <span id="currentBalance">0</span></p>
                        <div class="w-full bg-darkbg-border rounded-full h-1 mt-2">
                            <div class="gradient-primary h-1 rounded-full animate-pulse-slow" style="width: 75%"></div>
                        </div>
                    </div>
                    <button onclick="addFunds()" class="btn-modern gradient-primary hover:scale-105 text-white px-6 py-3 rounded-xl transition flex items-center gap-2 shadow-lg">
                        <i class="fas fa-plus"></i> 
                        <span>Adicionar</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Dashboard principal -->
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-8 mb-12">
            <!-- Gr√°fico de distribui√ß√£o melhorado -->
            <div class="glass rounded-2xl shadow-2xl p-8 xl:col-span-2 hover-lift animate-slide-up">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-text-heading flex items-center gap-3">
                        <i class="fas fa-chart-pie text-primary-500"></i>
                        Distribui√ß√£o de Investimentos
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="showMonthlyView()" id="monthlyBtn" 
                                class="btn-modern gradient-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                            Mensal
                        </button>
                        <button onclick="showAnnualView()" id="annualBtn" 
                                class="btn-modern bg-darkbg-lighter text-text-secondary px-4 py-2 rounded-lg text-sm font-medium transition hover:bg-darkbg-border">
                            Anual
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Gr√°fico circular melhorado -->
                    <div class="chart-container relative">
                        <div class="absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-full blur-xl"></div>
                        <svg viewBox="0 0 100 100" class="w-full h-full max-w-[320px] max-h-[320px] relative z-10">
                            <circle class="progress-ring__circle fixed-income"
                                    stroke-width="6" 
                                    fill="transparent"
                                    r="40"
                                    cx="50"
                                    cy="50"
                                    style="stroke-dasharray: 251.33, 251.33; stroke-dashoffset: 251.33; stroke: #8b5cf6;" />
                            <circle class="progress-ring__circle banks"
                                    stroke-width="6"
                                    fill="transparent"
                                    r="40"
                                    cx="50"
                                    cy="50"
                                    style="stroke-dasharray: 251.33, 251.33; stroke-dashoffset: 251.33; stroke: #10b981;" />
                            <circle class="progress-ring__circle utilities"
                                    stroke-width="6"
                                    fill="transparent"
                                    r="40"
                                    cx="50"
                                    cy="50"
                                    style="stroke-dasharray: 251.33, 251.33; stroke-dashoffset: 251.33; stroke: #f59e0b;" />
                            <circle class="progress-ring__circle etfs"
                                    stroke-width="6"
                                    fill="transparent"
                                    r="40"
                                    cx="50"
                                    cy="50"
                                    style="stroke-dasharray: 251.33, 251.33; stroke-dashoffset: 251.33; stroke: #ec4899;" />
                            <text x="50" y="46" text-anchor="middle" dy="0.3em" font-size="8" fill="#a3a3a3" font-weight="500">Total</text>
                            <text x="50" y="54" text-anchor="middle" dy="0.3em" font-size="10" fill="#ffffff" font-weight="700">R$ <tspan id="chartTotalValue">0</tspan></text>
                        </svg>
                    </div>
                    
                    <!-- Legendas melhoradas -->
                    <div class="space-y-6">
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-4 h-4 rounded-full bg-gradient-to-r from-purple-500 to-purple-600 shadow-lg"></div>
                                    <span class="text-sm font-semibold text-text">Renda Fixa</span>
                                </div>
                                <span class="text-sm font-bold text-text-heading" id="fixedIncomePercentage">0% (R$ 0)</span>
                            </div>
                            <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                                <div class="h-2 rounded-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-700" 
                                     id="fixedIncomeProgressBar" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-4 h-4 rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600 shadow-lg"></div>
                                    <span class="text-sm font-semibold text-text">Bancos</span>
                                </div>
                                <span class="text-sm font-bold text-text-heading" id="banksPercentage">0% (R$ 0)</span>
                            </div>
                            <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                                <div class="h-2 rounded-full bg-gradient-to-r from-emerald-500 to-emerald-600 transition-all duration-700" 
                                     id="banksProgressBar" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-4 h-4 rounded-full bg-gradient-to-r from-amber-500 to-amber-600 shadow-lg"></div>
                                    <span class="text-sm font-semibold text-text">Energia/Utilidades</span>
                                </div>
                                <span class="text-sm font-bold text-text-heading" id="utilitiesPercentage">0% (R$ 0)</span>
                            </div>
                            <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                                <div class="h-2 rounded-full bg-gradient-to-r from-amber-500 to-amber-600 transition-all duration-700" 
                                     id="utilitiesProgressBar" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-4 h-4 rounded-full bg-gradient-to-r from-pink-500 to-pink-600 shadow-lg"></div>
                                    <span class="text-sm font-semibold text-text">ETFs Dividendos</span>
                                </div>
                                <span class="text-sm font-bold text-text-heading" id="etfsPercentage">0% (R$ 0)</span>
                            </div>
                            <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                                <div class="h-2 rounded-full bg-gradient-to-r from-pink-500 to-pink-600 transition-all duration-700" 
                                     id="etfsProgressBar" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pr√≥ximos passos melhorado -->
            <div class="glass rounded-2xl shadow-2xl p-8 hover-lift animate-slide-up" style="animation-delay: 0.2s;">
                <h2 class="text-2xl font-bold text-text-heading mb-8 flex items-center gap-3">
                    <i class="fas fa-tasks text-primary-500"></i>
                    Pr√≥ximos Passos
                </h2>
                <div class="space-y-4">
                    <div class="glass-light p-4 rounded-xl hover:bg-darkbg-lighter transition-all duration-300 cursor-pointer group">
                        <div class="flex gap-4">
                            <div class="text-primary-500 text-xl mt-1 group-hover:scale-110 transition-transform">
                                <i class="far fa-calendar-check"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text group-hover:text-text-heading transition-colors">Investimento agendado</h3>
                                <p class="text-sm text-text-secondary">Data: <span class="font-medium text-primary-400">07/07</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-light p-4 rounded-xl hover:bg-darkbg-lighter transition-all duration-300 cursor-pointer group">
                        <div class="flex gap-4">
                            <div class="text-success text-xl mt-1 group-hover:scale-110 transition-transform">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text group-hover:text-text-heading transition-colors">Relat√≥rio mensal</h3>
                                <p class="text-sm text-text-secondary">Vencimento: <span class="font-medium text-success">30/06</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-light p-4 rounded-xl hover:bg-darkbg-lighter transition-all duration-300 cursor-pointer group">
                        <div class="flex gap-4">
                            <div class="text-warning text-xl mt-1 group-hover:scale-110 transition-transform">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text group-hover:text-text-heading transition-colors">Ajuste de portf√≥lio</h3>
                                <p class="text-sm text-text-secondary">Recomendado: <span class="font-medium text-warning">Revisar 15/07</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-light p-4 rounded-xl hover:bg-darkbg-lighter transition-all duration-300 cursor-pointer group">
                        <div class="flex gap-4">
                            <div class="text-purple-500 text-xl mt-1 group-hover:scale-110 transition-transform">
                                <i class="fas fa-donate"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-text group-hover:text-text-heading transition-colors">Dividendos esperados</h3>
                                <p class="text-sm text-text-secondary">Pr√≥ximo pagamento: <span class="font-medium text-purple-400">15/07</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tabela de investimentos melhorada -->
        <div class="glass rounded-2xl shadow-2xl p-8 mb-12 hover-lift animate-slide-up" style="animation-delay: 0.4s;">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
                <h2 class="text-2xl font-bold text-text-heading flex items-center gap-3">
                    <i class="fas fa-table text-primary-500"></i>
                    Meus Investimentos
                </h2>
                <div class="flex gap-3">
                    <div class="relative">
                        <input type="text" id="searchInvestments" placeholder="Buscar investimentos..." 
                               class="input-modern pl-10 pr-4 py-2 w-64 text-sm">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary"></i>
                    </div>
                    <button onclick="openAddInvestmentModal()" 
                            class="btn-modern gradient-primary hover:scale-105 text-white px-6 py-3 rounded-xl transition flex items-center gap-2 shadow-lg">
                        <i class="fas fa-plus"></i> 
                        <span>Adicionar</span>
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="table-modern w-full">
                    <thead>
                        <tr class="text-left border-b border-darkbg-border text-text-secondary text-sm">
                            <th class="pb-4 font-semibold">Setor</th>
                            <th class="pb-4 font-semibold">Ativo</th>
                            <th class="pb-4 font-semibold">% Alocado</th>
                            <th class="pb-4 font-semibold">Valor</th>
                            <th class="pb-4 font-semibold">Observa√ß√£o</th>
                            <th class="pb-4 font-semibold">A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="investmentsTableBody">
                        <!-- Conte√∫do ser√° preenchido dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Progresso do m√™s melhorado -->
        <div class="glass rounded-2xl shadow-2xl p-8 hover-lift animate-slide-up" style="animation-delay: 0.6s;">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
                <h2 class="text-2xl font-bold text-text-heading flex items-center gap-3">
                    <i class="fas fa-chart-bar text-primary-500"></i>
                    Progresso do M√™s
                </h2>
                <div id="progressEditButtons">
                    <button onclick="toggleEditProgress()" 
                            class="btn-modern gradient-primary hover:scale-105 text-white px-6 py-3 rounded-xl transition flex items-center gap-2 shadow-lg">
                        <i class="fas fa-edit"></i> 
                        <span>Editar</span>
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6">
                <div class="glass-light p-6 rounded-xl hover-lift">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-success/20 rounded-lg">
                            <i class="fas fa-wallet text-success text-lg"></i>
                        </div>
                        <h3 class="text-sm font-semibold text-text-secondary">Total Alocado</h3>
                    </div>
                    <p class="text-2xl font-bold text-text-heading mb-3" id="displayAmountInvested">
                        R$ <span id="amountInvested">0</span>
                    </p>
                    <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                        <div class="gradient-success rounded-full h-2 transition-all duration-700" 
                             id="totalAllocatedProgressBar" style="width: 100%"></div>
                    </div>
                </div>
                
                <div class="glass-light p-6 rounded-xl hover-lift">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-primary-500/20 rounded-lg">
                            <i class="fas fa-target text-primary-500 text-lg"></i>
                        </div>
                        <h3 class="text-sm font-semibold text-text-secondary">Meta Mensal</h3>
                    </div>
                    <p class="text-2xl font-bold text-text-heading mb-3" id="displayMonthlyGoal">
                        R$ <span id="monthlyGoal">1000</span>
                    </p>
                    <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                        <div class="gradient-primary rounded-full h-2 transition-all duration-700" 
                             id="monthlyGoalProgressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="glass-light p-6 rounded-xl hover-lift">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-warning/20 rounded-lg">
                            <i class="fas fa-coins text-warning text-lg"></i>
                        </div>
                        <h3 class="text-sm font-semibold text-text-secondary">Dividendos</h3>
                    </div>
                    <p class="text-2xl font-bold text-text-heading mb-3" id="displayDividends">
                        R$ <span id="dividends">0</span>
                    </p>
                    <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                        <div class="gradient-warning rounded-full h-2 transition-all duration-700" 
                             id="dividendsProgressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="glass-light p-6 rounded-xl hover-lift">
                    <div class="flex items-center gap-3 mb-4">
                        <div class="p-2 bg-purple-500/20 rounded-lg">
                            <i class="fas fa-chart-line text-purple-500 text-lg"></i>
                        </div>
                        <h3 class="text-sm font-semibold text-text-secondary">Rentabilidade</h3>
                    </div>
                    <p class="text-2xl font-bold text-text-heading mb-3" id="displayProfitability">
                        <span id="profitability">0</span>%
                    </p>
                    <div class="w-full bg-darkbg-border rounded-full h-2 overflow-hidden">
                        <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-full h-2 transition-all duration-700" 
                             id="profitabilityProgressBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de adicionar investimento melhorado -->
    <div id="addInvestmentModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center hidden px-4 z-50">
        <div class="glass rounded-2xl p-8 w-full max-w-md animate-scale-in shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-text-heading" id="investmentModalTitle">
                    <i class="fas fa-plus-circle text-primary-500 mr-2"></i>
                    Adicionar Investimento
                </h3>
                <button onclick="closeAddInvestmentModal()" 
                        class="text-text-secondary hover:text-danger transition-colors p-2 rounded-lg hover:bg-darkbg-lighter">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="investmentForm" class="space-y-6">
                <input type="hidden" id="investmentId">
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="investmentSector" class="block text-sm font-semibold text-text-secondary mb-2">Setor</label>
                        <select id="investmentSector" class="input-modern w-full">
                            <option value="Renda Fixa">Renda Fixa</option>
                            <option value="Bancos">Bancos</option>
                            <option value="Energia">Energia</option>
                            <option value="Utilidades">Utilidades</option>
                            <option value="Cripto">Cripto</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-text-secondary mb-2">Cor do Setor</label>
                        <input type="color" id="sectorColor" class="w-full h-12 rounded-xl border-2 border-darkbg-border bg-darkbg-lighter">
                    </div>
                </div>
                
                <div>
                    <label for="investmentAsset" class="block text-sm font-semibold text-text-secondary mb-2">Ativos</label>
                    <input type="text" id="investmentAsset" placeholder="Ex: Taesa, Engie" class="input-modern w-full">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="investmentPercentage" class="block text-sm font-semibold text-text-secondary mb-2">Percentual (%)</label>
                        <input type="number" id="investmentPercentage" min="0" max="100" class="input-modern w-full">
                    </div>
                    <div>
                        <label for="investmentValue" class="block text-sm font-semibold text-text-secondary mb-2">Valor (R$)</label>
                        <input type="number" id="investmentValue" class="input-modern w-full">
                    </div>
                </div>
                
                <div>
                    <label for="investmentObservation" class="block text-sm font-semibold text-text-secondary mb-2">Observa√ß√£o</label>
                    <textarea id="investmentObservation" rows="3" class="input-modern w-full resize-none"></textarea>
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="btn-modern gradient-primary hover:scale-105 w-full text-white px-6 py-4 rounded-xl transition shadow-lg font-semibold">
                        <i class="fas fa-save mr-2"></i>
                        Salvar Investimento
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal de adicionar fundos melhorado -->
    <div id="addFundsModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center hidden px-4 z-50">
        <div class="glass rounded-2xl p-8 w-full max-w-md animate-scale-in shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-text-heading">
                    <i class="fas fa-plus-circle text-success mr-2"></i>
                    Adicionar Fundos
                </h3>
                <button onclick="closeAddFundsModal()" 
                        class="text-text-secondary hover:text-danger transition-colors p-2 rounded-lg hover:bg-darkbg-lighter">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form class="space-y-6">
                <div>
                    <label for="newFundsInput" class="block text-sm font-semibold text-text-secondary mb-2">Valor (R$)</label>
                    <input type="number" id="newFundsInput" class="input-modern w-full" placeholder="0,00">
                </div>
                
                <div>
                    <label for="fundSource" class="block text-sm font-semibold text-text-secondary mb-2">Origem</label>
                    <select id="fundSource" class="input-modern w-full">
                        <option>Sal√°rio</option>
                        <option>Dividendos</option>
                        <option>Freelance</option>
                        <option>Outros</option>
                    </select>
                </div>
                
                <div class="pt-4">
                    <button type="button" onclick="confirmAddFunds()" 
                            class="btn-modern gradient-success hover:scale-105 w-full text-white px-6 py-4 rounded-xl transition shadow-lg font-semibold">
                        <i class="fas fa-wallet mr-2"></i>
                        Adicionar ao Saldo
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Container de notifica√ß√µes -->
    <div id="notificationContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Inicializa√ß√£o de part√≠culas
        function createParticles() {
            const particles = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 5) + 's';
                particles.appendChild(particle);
            }
        }

        // Vari√°veis globais
        let currentBalance = parseFloat(localStorage.getItem('currentBalance')) || 0;
        let amountInvested = parseFloat(localStorage.getItem('amountInvested')) || 0;
        let investments = JSON.parse(localStorage.getItem('investments')) || [];
        let editingInvestmentId = null;

        let monthlyGoal = parseFloat(localStorage.getItem('monthlyGoal')) || 1000;
        let dividends = parseFloat(localStorage.getItem('dividends')) || 0;
        let profitability = parseFloat(localStorage.getItem('profitability')) || 0;

        let monthlyInvestments = JSON.parse(localStorage.getItem('monthlyInvestments')) || [];
        let annualInvestments = JSON.parse(localStorage.getItem('annualInvestments')) || [];
        let currentView = localStorage.getItem('currentView') || 'monthly';

        // Dados iniciais padr√£o
        const initialDefaultInvestments = [
            { id: Date.now() + 1, sector: 'Renda Fixa', asset: 'Banco Inter, CDBs', percentage: 25, value: 200, observation: 'Investimento conservador' },
            { id: Date.now() + 2, sector: 'Bancos', asset: 'Banco do Brasil, Ita√∫, Santander', percentage: 50, value: 400, observation: 'Foco em dividendos' },
            { id: Date.now() + 3, sector: 'Energia/Utilidades', asset: 'Taesa, Engie, AES Tiet√™, Copasa, Sabesp', percentage: 30, value: 240, observation: 'Estabilidade e dividendos' },
            { id: Date.now() + 4, sector: 'ETFs Dividendos', asset: 'DIVO11, IVVB11', percentage: 20, value: 160, observation: 'Diversifica√ß√£o de dividendos' }
        ];

        // Inicializa√ß√£o
        if (monthlyInvestments.length === 0) {
            monthlyInvestments = [...initialDefaultInvestments];
            localStorage.setItem('monthlyInvestments', JSON.stringify(monthlyInvestments));
        }
        if (annualInvestments.length === 0) {
            annualInvestments = [...initialDefaultInvestments];
            annualInvestments.push({ id: Date.now() + 5, sector: 'Outros', asset: 'Fundo Imobili√°rio XPML11', percentage: 10, value: 100, observation: 'Long-term' });
            localStorage.setItem('annualInvestments', JSON.stringify(annualInvestments));
        }

        // Fun√ß√µes principais
        function setInvestmentsForCurrentView() {
            if (currentView === 'monthly') {
                investments = monthlyInvestments;
            } else {
                investments = annualInvestments;
            }
            amountInvested = investments.reduce((sum, inv) => sum + inv.value, 0);
        }

        function updateDisplay() {
            setInvestmentsForCurrentView();

            // Anima√ß√£o de contadores
            animateCounter('currentBalance', currentBalance);
            animateCounter('amountInvested', amountInvested);
            animateCounter('chartTotalValue', amountInvested);
            animateCounter('monthlyGoal', monthlyGoal);
            animateCounter('dividends', dividends);
            animateCounter('profitability', profitability, '%');

            updateProgressBars();
            renderInvestmentsTable();
            updateChartAndProgressBars();
            updateViewButtons();
        }

        function animateCounter(elementId, targetValue, suffix = '') {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const startValue = parseFloat(element.textContent.replace(/[^\d.-]/g, '')) || 0;
            const duration = 1000;
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const currentValue = startValue + (targetValue - startValue) * easeOutQuart;
                
                element.textContent = currentValue.toFixed(2) + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }
            
            requestAnimationFrame(animate);
        }

        // Notifica√ß√µes melhoradas
        function showNotification(message, type = 'success') {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            
            const icons = {
                success: 'fas fa-check-circle',
                warning: 'fas fa-exclamation-triangle',
                error: 'fas fa-times-circle'
            };
            
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="flex items-center gap-3">
                    <i class="${icons[type]} text-lg"></i>
                    <span class="font-medium">${message}</span>
                </div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => container.removeChild(notification), 400);
            }, 4000);
        }

        // Progresso do m√™s
        let isEditingProgress = false;
        let originalProgressValues = {};

        function toggleEditProgress() {
            isEditingProgress = !isEditingProgress;
            const progressEditButtons = document.getElementById('progressEditButtons');
            const displayAmountInvested = document.getElementById('displayAmountInvested');
            const displayMonthlyGoal = document.getElementById('displayMonthlyGoal');
            const displayDividends = document.getElementById('displayDividends');
            const displayProfitability = document.getElementById('displayProfitability');

            if (isEditingProgress) {
                originalProgressValues = {
                    amountInvested: amountInvested,
                    monthlyGoal: monthlyGoal,
                    dividends: dividends,
                    profitability: profitability
                };

                progressEditButtons.innerHTML = `
                    <div class="flex gap-2">
                        <button onclick="saveProgress()" class="btn-modern gradient-success hover:scale-105 text-white px-4 py-2 rounded-lg transition flex items-center gap-2">
                            <i class="fas fa-save"></i> Salvar
                        </button>
                        <button onclick="cancelEditProgress()" class="btn-modern gradient-danger hover:scale-105 text-white px-4 py-2 rounded-lg transition flex items-center gap-2">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                    </div>
                `;

                displayAmountInvested.innerHTML = `R$ <input type="number" id="editAmountInvested" value="${amountInvested.toFixed(2)}" class="input-modern inline-block w-32 text-xl font-bold">`;
                displayMonthlyGoal.innerHTML = `R$ <input type="number" id="editMonthlyGoal" value="${monthlyGoal.toFixed(2)}" class="input-modern inline-block w-32 text-xl font-bold">`;
                displayDividends.innerHTML = `R$ <input type="number" id="editDividends" value="${dividends.toFixed(2)}" class="input-modern inline-block w-32 text-xl font-bold">`;
                displayProfitability.innerHTML = `<input type="number" id="editProfitability" value="${profitability.toFixed(2)}" class="input-modern inline-block w-24 text-xl font-bold">%`;

            } else {
                progressEditButtons.innerHTML = `
                    <button onclick="toggleEditProgress()" class="btn-modern gradient-primary hover:scale-105 text-white px-6 py-3 rounded-xl transition flex items-center gap-2 shadow-lg">
                        <i class="fas fa-edit"></i> <span>Editar</span>
                    </button>
                `;

                displayAmountInvested.innerHTML = `R$ <span id="amountInvested">${amountInvested.toFixed(2)}</span>`;
                displayMonthlyGoal.innerHTML = `R$ <span id="monthlyGoal">${monthlyGoal.toFixed(2)}</span>`;
                displayDividends.innerHTML = `R$ <span id="dividends">${dividends.toFixed(2)}</span>`;
                displayProfitability.innerHTML = `<span id="profitability">${profitability.toFixed(2)}</span>%`;
            }
        }

        function saveProgress() {
            const newAmountInvested = parseFloat(document.getElementById('editAmountInvested').value);
            const newMonthlyGoal = parseFloat(document.getElementById('editMonthlyGoal').value);
            const newDividends = parseFloat(document.getElementById('editDividends').value);
            const newProfitability = parseFloat(document.getElementById('editProfitability').value);

            if (!isNaN(newAmountInvested)) {
                amountInvested = newAmountInvested;
                localStorage.setItem('amountInvested', amountInvested);
            }
            if (!isNaN(newMonthlyGoal)) {
                monthlyGoal = newMonthlyGoal;
                localStorage.setItem('monthlyGoal', monthlyGoal);
            }
            if (!isNaN(newDividends)) {
                dividends = newDividends;
                localStorage.setItem('dividends', dividends);
            }
            if (!isNaN(newProfitability)) {
                profitability = newProfitability;
                localStorage.setItem('profitability', profitability);
            }
            
            showNotification('Progresso do m√™s salvo com sucesso!', 'success');
            toggleEditProgress();
            updateDisplay();
        }

        function cancelEditProgress() {
            amountInvested = originalProgressValues.amountInvested;
            monthlyGoal = originalProgressValues.monthlyGoal;
            dividends = originalProgressValues.dividends;
            profitability = originalProgressValues.profitability;

            toggleEditProgress();
            updateDisplay();
            showNotification('Edi√ß√£o de progresso cancelada.', 'warning');
        }

        function updateProgressBars() {
            const totalAllocatedProgressBar = document.getElementById('totalAllocatedProgressBar');
            if (totalAllocatedProgressBar) {
                totalAllocatedProgressBar.style.width = '100%';
            }

            const monthlyGoalProgressBar = document.getElementById('monthlyGoalProgressBar');
            if (monthlyGoalProgressBar && monthlyGoal > 0) {
                const progress = (amountInvested / monthlyGoal) * 100;
                monthlyGoalProgressBar.style.width = `${Math.min(100, progress)}%`;
            }

            const dividendsProgressBar = document.getElementById('dividendsProgressBar');
            const dividendTarget = 500;
            if (dividendsProgressBar && dividendTarget > 0) {
                const progress = (dividends / dividendTarget) * 100;
                dividendsProgressBar.style.width = `${Math.min(100, progress)}%`;
            }

            const profitabilityProgressBar = document.getElementById('profitabilityProgressBar');
            const profitabilityTarget = 10;
            if (profitabilityProgressBar && profitabilityTarget > 0) {
                const progress = (profitability / profitabilityTarget) * 100;
                profitabilityProgressBar.style.width = `${Math.min(100, progress)}%`;
            }
        }

        // Visualiza√ß√µes mensais/anuais
        function showMonthlyView() {
            currentView = 'monthly';
            localStorage.setItem('currentView', currentView);
            updateDisplay();
        }

        function showAnnualView() {
            currentView = 'annual';
            localStorage.setItem('currentView', currentView);
            updateDisplay();
        }

        function updateViewButtons() {
            const monthlyBtn = document.getElementById('monthlyBtn');
            const annualBtn = document.getElementById('annualBtn');

            if (currentView === 'monthly') {
                monthlyBtn.className = 'btn-modern gradient-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition';
                annualBtn.className = 'btn-modern bg-darkbg-lighter text-text-secondary px-4 py-2 rounded-lg text-sm font-medium transition hover:bg-darkbg-border';
            } else {
                monthlyBtn.className = 'btn-modern bg-darkbg-lighter text-text-secondary px-4 py-2 rounded-lg text-sm font-medium transition hover:bg-darkbg-border';
                annualBtn.className = 'btn-modern gradient-primary text-white px-4 py-2 rounded-lg text-sm font-medium transition';
            }
        }

        // Gr√°fico e barras de progresso
        function updateChartAndProgressBars() {
            const sectorTotals = {};
            let totalValue = 0;

            investments.forEach(investment => {
                const sector = investment.sector;
                if (!sectorTotals[sector]) {
                    sectorTotals[sector] = 0;
                }
                sectorTotals[sector] += investment.value;
                totalValue += investment.value;
            });

            const sectorMapping = {
                'Renda Fixa': { element: 'fixedIncomePercentage', progressBar: 'fixedIncomeProgressBar', circle: 'fixed-income', color: '#8b5cf6' },
                'Bancos': { element: 'banksPercentage', progressBar: 'banksProgressBar', circle: 'banks', color: '#10b981' },
                'Energia/Utilidades': { element: 'utilitiesPercentage', progressBar: 'utilitiesProgressBar', circle: 'utilities', color: '#f59e0b' },
                'ETFs Dividendos': { element: 'etfsPercentage', progressBar: 'etfsProgressBar', circle: 'etfs', color: '#ec4899' }
            };

            const circumference = 2 * Math.PI * 40;
            let currentOffset = 0;

            Object.keys(sectorMapping).forEach(sector => {
                const value = sectorTotals[sector] || 0;
                const percentage = totalValue > 0 ? (value / totalValue) * 100 : 0;
                const mapping = sectorMapping[sector];

                const percentageElement = document.getElementById(mapping.element);
                const progressBarElement = document.getElementById(mapping.progressBar);
                const circleElement = document.querySelector(`.progress-ring__circle.${mapping.circle}`);

                if (percentageElement) {
                    percentageElement.textContent = `${percentage.toFixed(1)}% (R$ ${value.toFixed(2)})`;
                }

                if (progressBarElement) {
                    progressBarElement.style.width = `${percentage}%`;
                }

                if (circleElement) {
                    const strokeLength = (percentage / 100) * circumference;
                    circleElement.style.strokeDasharray = `${strokeLength}, ${circumference}`;
                    circleElement.style.strokeDashoffset = -currentOffset;
                    currentOffset += strokeLength;
                }
            });
        }

        // Tabela de investimentos
        function renderInvestmentsTable() {
            const tbody = document.getElementById('investmentsTableBody');
            tbody.innerHTML = '';

            const searchTerm = document.getElementById('searchInvestments')?.value.toLowerCase() || '';
            const filteredInvestments = investments.filter(investment => 
                investment.sector.toLowerCase().includes(searchTerm) ||
                investment.asset.toLowerCase().includes(searchTerm) ||
                investment.observation.toLowerCase().includes(searchTerm)
            );

            filteredInvestments.forEach((investment, index) => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-darkbg-table_hover transition-all duration-300 cursor-pointer';
                row.innerHTML = `
                    <td class="py-4">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-gradient-to-r from-purple-500 to-purple-600"></div>
                            <span class="font-medium">${investment.sector}</span>
                        </div>
                    </td>
                    <td class="py-4 font-medium">${investment.asset}</td>
                    <td class="py-4">
                        <span class="bg-primary-500/20 text-primary-400 px-2 py-1 rounded-lg text-sm font-semibold">
                            ${investment.percentage}%
                        </span>
                    </td>
                    <td class="py-4 font-bold text-success">R$ ${investment.value.toFixed(2)}</td>
                    <td class="py-4 text-text-secondary text-sm">${investment.observation}</td>
                    <td class="py-4">
                        <div class="flex gap-2">
                            <button onclick="editInvestment(${investment.id})" 
                                    class="text-primary-500 hover:text-primary-400 transition-colors p-2 rounded-lg hover:bg-darkbg-lighter">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteInvestment(${investment.id})" 
                                    class="text-danger hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-darkbg-lighter">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Modais
        function openAddInvestmentModal() {
            document.getElementById('addInvestmentModal').classList.remove('hidden');
            document.getElementById('investmentModalTitle').innerHTML = '<i class="fas fa-plus-circle text-primary-500 mr-2"></i>Adicionar Investimento';
            document.getElementById('investmentForm').reset();
            document.getElementById('investmentId').value = '';
            editingInvestmentId = null;
        }

        function closeAddInvestmentModal() {
            document.getElementById('addInvestmentModal').classList.add('hidden');
        }

        function addFunds() {
            document.getElementById('addFundsModal').classList.remove('hidden');
        }

        function closeAddFundsModal() {
            document.getElementById('addFundsModal').classList.add('hidden');
        }

        function confirmAddFunds() {
            const newFunds = parseFloat(document.getElementById('newFundsInput').value);
            const source = document.getElementById('fundSource').value;
            
            if (!isNaN(newFunds) && newFunds > 0) {
                currentBalance += newFunds;
                localStorage.setItem('currentBalance', currentBalance);
                updateDisplay();
                closeAddFundsModal();
                showNotification(`R$ ${newFunds.toFixed(2)} adicionados com sucesso! Origem: ${source}`, 'success');
                document.getElementById('newFundsInput').value = '';
            } else {
                showNotification('Por favor, insira um valor v√°lido.', 'error');
            }
        }

        // Gerenciamento de investimentos
        function editInvestment(id) {
            const investment = investments.find(inv => inv.id === id);
            if (investment) {
                editingInvestmentId = id;
                document.getElementById('investmentId').value = id;
                document.getElementById('investmentSector').value = investment.sector;
                document.getElementById('investmentAsset').value = investment.asset;
                document.getElementById('investmentPercentage').value = investment.percentage;
                document.getElementById('investmentValue').value = investment.value;
                document.getElementById('investmentObservation').value = investment.observation;
                document.getElementById('investmentModalTitle').innerHTML = '<i class="fas fa-edit text-warning mr-2"></i>Editar Investimento';
                document.getElementById('addInvestmentModal').classList.remove('hidden');
            }
        }

        function deleteInvestment(id) {
            if (confirm('Tem certeza que deseja excluir este investimento?')) {
                const index = investments.findIndex(inv => inv.id === id);
                if (index !== -1) {
                    investments.splice(index, 1);
                    
                    if (currentView === 'monthly') {
                        monthlyInvestments = investments;
                        localStorage.setItem('monthlyInvestments', JSON.stringify(monthlyInvestments));
                    } else {
                        annualInvestments = investments;
                        localStorage.setItem('annualInvestments', JSON.stringify(annualInvestments));
                    }
                    
                    updateDisplay();
                    showNotification('Investimento exclu√≠do com sucesso!', 'success');
                }
            }
        }

        // Form de investimento
        document.getElementById('investmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const sector = document.getElementById('investmentSector').value;
            const asset = document.getElementById('investmentAsset').value;
            const percentage = parseFloat(document.getElementById('investmentPercentage').value);
            const value = parseFloat(document.getElementById('investmentValue').value);
            const observation = document.getElementById('investmentObservation').value;
            
            if (!asset || isNaN(percentage) || isNaN(value)) {
                showNotification('Por favor, preencha todos os campos obrigat√≥rios.', 'error');
                return;
            }
            
            const investmentData = {
                sector,
                asset,
                percentage,
                value,
                observation
            };
            
            if (editingInvestmentId) {
                const index = investments.findIndex(inv => inv.id === editingInvestmentId);
                if (index !== -1) {
                    investments[index] = { ...investments[index], ...investmentData };
                    showNotification('Investimento atualizado com sucesso!', 'success');
                }
            } else {
                const newInvestment = {
                    id: Date.now(),
                    ...investmentData
                };
                investments.push(newInvestment);
                showNotification('Investimento adicionado com sucesso!', 'success');
            }
            
            if (currentView === 'monthly') {
                monthlyInvestments = investments;
                localStorage.setItem('monthlyInvestments', JSON.stringify(monthlyInvestments));
            } else {
                annualInvestments = investments;
                localStorage.setItem('annualInvestments', JSON.stringify(annualInvestments));
            }
            
            updateDisplay();
            closeAddInvestmentModal();
        });

        // Busca de investimentos
        document.getElementById('searchInvestments')?.addEventListener('input', function() {
            renderInvestmentsTable();
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateDisplay();
            
            // Adicionar anima√ß√µes de entrada escalonadas
            const elements = document.querySelectorAll('.animate-slide-up');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
        });

        // Fechar modais ao clicar fora
        document.addEventListener('click', function(e) {
            if (e.target.id === 'addInvestmentModal') {
                closeAddInvestmentModal();
            }
            if (e.target.id === 'addFundsModal') {
                closeAddFundsModal();
            }
        });

        // Atalhos de teclado
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAddInvestmentModal();
                closeAddFundsModal();
            }
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                openAddInvestmentModal();
            }
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                document.getElementById('searchInvestments')?.focus();
            }
        });
    </script>
</body>
</html>

